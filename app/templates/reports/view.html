{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="fas fa-chart-pie me-2 text-primary"></i>Business Reports</h2>
    <div class="btn-group">
        <a href="{{ url_for('main.export_products') }}" class="btn btn-outline-success"><i
                class="fas fa-file-excel me-2"></i>Export Products</a>
        <a href="{{ url_for('main.export_orders') }}" class="btn btn-outline-primary"><i // Sales Chart const
                salesCtx=document.getElementById('salesChart').getContext('2d'); new Chart(salesCtx, { type: 'line' ,
                data: { labels: {{ dates | tojson }}, datasets: [{ label: 'Sales (PKR)' , data: {{ amounts | tojson }},
                borderColor: '#0d6efd' , backgroundColor: 'rgba(13, 110, 253, 0.1)' , tension: 0.4, fill: true }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true, grid: { borderDash: [2, 4] } }, x: { grid: { display: false } } } }
                }); // Top Products Chart const productsCtx=document.getElementById('productsChart').getContext('2d');
                new Chart(productsCtx, { type: 'doughnut' , data: { labels: [{% for p in top_products[: 5] %}"{{ p.name
                }}", {% endfor %}], datasets: [{ data: [{% for p in top_products[: 5] %}{{ p.revenue }}, {% endfor %}],
                backgroundColor: [ '#4e73df' , '#1cc88a' , '#36b9cc' , '#f6c23e' , '#e74a3b' ], hoverOffset: 4 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' ,
                labels: { boxWidth: 12 } } } } }); </script>
                {% endblock %}